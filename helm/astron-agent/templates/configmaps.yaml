{{- if .Values.casdoor.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-casdoor-conf
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  app.conf: {{ .Files.Get "files/casdoor/conf/app.conf" | quote }}
  init_data.json: {{ .Files.Get "files/casdoor/conf/init_data.json" | quote }}
  entrypoint.sh: {{ .Files.Get "files/casdoor/entrypoint.sh" | quote }}
---
{{- end }}
{{- if .Values.mysql.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-mysql-init
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  01-schema-part1.sql: {{ .Files.Get "files/mysql/schema_part1.sql" | quote }}
  02-schema-part2.sql: {{ .Files.Get "files/mysql/schema_part2.sql" | quote }}
  03-schema-part3.sql: {{ .Files.Get "files/mysql/schema_part3.sql" | quote }}
  04-schema-part4.sql: {{ .Files.Get "files/mysql/schema_part4.sql" | quote }}
  05-agent.sql: {{ .Files.Get "files/mysql/agent.sql" | quote }}
  06-link.sql: {{ .Files.Get "files/mysql/link.sql" | quote }}
  07-tenant.sql: {{ .Files.Get "files/mysql/tenant.sql" | quote }}
  08-workflow.sql: {{ .Files.Get "files/mysql/workflow.sql" | quote }}
---
{{- end }}
{{- if .Values.postgresql.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-postgres-init
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  {{- range $path, $_ := .Files.Glob "files/pgsql/*.sql" }}
  {{ base $path }}: {{ $.Files.Get $path | quote }}
  {{- end }}
---
{{- end }}
{{- if .Values.coreTenant.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-core-tenant-config
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  config.toml: {{ .Files.Get "files/config/tenant/config.toml" | quote }}
---
{{- end }}
{{- if .Values.coreDatabase.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-core-database-config
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  config.env: {{ .Files.Get "files/config/database/config.env" | quote }}
---
{{- end }}
{{- if .Values.coreRpa.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-core-rpa-config
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  config.env: {{ .Files.Get "files/config/rpa/config.env" | quote }}
---
{{- end }}
{{- if .Values.coreLink.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-core-link-config
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  config.env: {{ .Files.Get "files/config/link/config.env" | quote }}
---
{{- end }}
{{- if .Values.coreAitools.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-core-aitools-config
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  config.env: {{ .Files.Get "files/config/aitools/config.env" | quote }}
---
{{- end }}
{{- if .Values.coreAgent.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-core-agent-config
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  config.env: {{ .Files.Get "files/config/agent/config.env" | quote }}
---
{{- end }}
{{- if .Values.coreKnowledge.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-core-knowledge-config
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  config.env: {{ .Files.Get "files/config/knowledge/config.env" | quote }}
---
{{- end }}
{{- if .Values.coreWorkflow.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "astron-agent.fullname" . }}-core-workflow-config
  labels:
    {{- include "astron-agent.labels" . | nindent 4 }}
data:
  config.env: {{ .Files.Get "files/config/workflow/config.env" | quote }}
---
{{- end }}
